<!DOCTYPE html><html lang="zh-Hans"><head><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="呼哧"><meta name="description" content="MVC 模式模式不是独立工作的，模式通常需要同时使用并加以组合，以实现特定的设计解决方法。MVC不仅是一种实现用户界面的软件模式，也是一种易于修改维护的架构。通常分为3个基本部分：Model,View,Control。工作机制：模型提供数据和业务逻辑(如存储查询信息)，视图负责数据的展示，控制器是两者的粘合剂，根据用户需求来协调模型和视图。模型可以独立工作，视图和控制器依赖于模型。MVC涉及的主要"><meta name="keywords" content="python,设计模式"><meta property="og:type" content="article"><meta property="og:title" content="python设计模式(四)"><meta property="og:url" content="http://hu-chi.github.io/2017/12/21/设计模式/python设计模式(4)/index.html"><meta property="og:site_name" content="Play with huchi"><meta property="og:description" content="MVC 模式模式不是独立工作的，模式通常需要同时使用并加以组合，以实现特定的设计解决方法。MVC不仅是一种实现用户界面的软件模式，也是一种易于修改维护的架构。通常分为3个基本部分：Model,View,Control。工作机制：模型提供数据和业务逻辑(如存储查询信息)，视图负责数据的展示，控制器是两者的粘合剂，根据用户需求来协调模型和视图。模型可以独立工作，视图和控制器依赖于模型。MVC涉及的主要"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2017-12-21T07:13:53.806Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="python设计模式(四)"><meta name="twitter:description" content="MVC 模式模式不是独立工作的，模式通常需要同时使用并加以组合，以实现特定的设计解决方法。MVC不仅是一种实现用户界面的软件模式，也是一种易于修改维护的架构。通常分为3个基本部分：Model,View,Control。工作机制：模型提供数据和业务逻辑(如存储查询信息)，视图负责数据的展示，控制器是两者的粘合剂，根据用户需求来协调模型和视图。模型可以独立工作，视图和控制器依赖于模型。MVC涉及的主要"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="alternate" href="/atom.xml" title="Play with huchi" type="application/atom+xml"><link rel="shortcut icon" href="/img/huchi.jpg"><link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet"><link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><title>python设计模式(四) | Play with huchi</title><script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script>var yiliaConfig={fancybox:!0,animate:!0,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,fancybox_js:"//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",scrollreveal:"//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",search:!0}</script><script>yiliaConfig.jquery_ui=[!0,"//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js","//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"]</script><script>yiliaConfig.rootUrl="/"</script></head></html><body><div id="container"><div class="left-col"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/huchi.jpg" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/">呼哧</a></h1></hgroup><p class="header-subtitle">看遍南海风云卷，最恨难赴故人约。</p><form id="search-form"><input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false"> <i class="fa fa-times" onclick="resetSearch()"></i></form><div id="local-search-result"></div><p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p><div id="switch-btn" class="switch-btn"><div class="icon"><div class="icon-ctn"><div class="icon-wrap icon-house" data-idx="0"><div class="birdhouse"></div><div class="birdhouse_holes"></div></div><div class="icon-wrap icon-ribbon hide" data-idx="1"><div class="ribbon"></div></div><div class="icon-wrap icon-link hide" data-idx="2"><div class="loopback_l"></div><div class="loopback_r"></div></div><div class="icon-wrap icon-me hide" data-idx="3"><div class="user"></div><div class="shoulder"></div></div></div></div><div class="tips-box hide"><div class="tips-arrow"></div><ul class="tips-inner"><li>菜单</li><li>标签</li><li>友情链接</li><li>关于我</li></ul></div></div><div id="switch-area" class="switch-area"><div class="switch-wrap"><section class="switch-part switch-part1"><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/随笔">随笔</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" href="/779197837@qq.com" title="Email"></a> <a class="fa GitHub" href="#" title="GitHub"></a> <a class="fa RSS" href="/atom.xml" title="RSS"></a></ul></nav></section><section class="switch-part switch-part2"><div class="widget tagcloud" id="js-tagcloud"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hadoop/">Hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm/">acm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/starts/">starts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端设计/">前端设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杂书/">杂书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络编程/">网络编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul></div></section><section class="switch-part switch-part3"><div id="js-friends"><a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a> <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a> <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a></div></section><section class="switch-part switch-part4"><div id="js-aboutme">专注于前端</div></section></div></div></header></div></div><div class="mid-col"><nav id="mobile-nav"><div class="overlay"><div class="slider-trigger"></div><h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">呼哧</a></h1></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/huchi.jpg" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/" title="回到主页">呼哧</a></h1></hgroup><p class="header-subtitle">看遍南海风云卷，最恨难赴故人约。</p><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/随笔">随笔</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li><div class="clearfix"></div></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" target="_blank" href="/779197837@qq.com" title="Email"></a> <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a> <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a></ul></nav></header></div><link class="menu-list" tags="标签" friends="友情链接" about="关于我"></nav><div class="body-wrap"><article id="article-设计模式/python设计模式(4)" class="article article-type-article" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2017/12/21/设计模式/python设计模式(4)/" class="article-date"><time datetime="2017-12-21T10:40:42.000Z" itemprop="datePublished">2017-12-21</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 class="article-title" itemprop="name">python设计模式(四)</h1></header><div class="article-info article-info-post"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/python/">python</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul></div><div class="clearfix"></div></div><div class="article-entry" itemprop="articleBody"><h1 id="MVC-模式"><a href="#MVC-模式" class="headerlink" title="MVC 模式"></a>MVC 模式</h1><p>模式不是独立工作的，模式通常需要同时使用并加以组合，以实现特定的设计解决方法。</p><p>MVC不仅是一种实现用户界面的软件模式，也是一种易于修改维护的架构。通常分为3个基本部分：Model,View,Control。</p><p>工作机制：模型提供数据和业务逻辑(如存储查询信息)，视图负责数据的展示，控制器是两者的粘合剂，根据用户需求来协调模型和视图。模型可以独立工作，视图和控制器依赖于模型。</p><p>MVC涉及的主要类：</p><ul><li>模型类定义针对数据的所有操作，并提供与数据使用方法有关的方法</li><li>视图类代表用户界面。他提供相应的方法，帮助我们根据上下文和应用程序的需要来构建Web或GUI界面。不应该包含自己的任何逻辑，只应该显示收到的数据</li><li>控制器类从请求接收数据，并将其发送到系统的其他部分，它需要提供用于路由请求的方法。</li></ul><a id="more"></a><p>MVC模式常用场景：</p><ul><li>当需要更改展示方式而不更改业务逻辑</li><li>多个控制器可用于使用多个视图来更改用户界面上的展示</li><li>再次重申，当模型改变时，视图无需改动，相互独立</li></ul><p>主要意图：</p><ul><li>将数据和数据的展示隔离开</li><li>使类的维护和实现更加简单</li><li>灵活地改变数据的存储和显示方式</li></ul><h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><p>模型是应用程序的基石，它独立于试图和控制器。</p><p>提供客户端请求的数据，模型由存储和返回信息的数据库表来表示。模型会提供状态以及改变状态的方法。但它不知道数据是如何展示的</p><p>模型必须在多个操作中保持一致。</p><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>视图将数据展示在接口上，不应包含任何复杂逻辑，避免与数据库直接交互，依靠模型来获取这些数据</p><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><p>控制用户在界面上的交互，调用相应的模型，也能将数据传递给视图。不应该进行数据库调用和数据的展示。</p><p>一个简答实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	services = &#123;</span><br><span class="line">		<span class="string">'email'</span> : &#123;<span class="string">'number'</span>: <span class="number">1000</span>, <span class="string">'price'</span>: <span class="number">2</span>,&#125;,</span><br><span class="line">		<span class="string">'sms'</span>: &#123;<span class="string">'number'</span>: <span class="number">1000</span>, <span class="string">'price'</span>: <span class="number">10</span>,&#125;,</span><br><span class="line">		<span class="string">'voice'</span>: &#123;<span class="string">'number'</span>: <span class="number">1000</span>, <span class="string">'price'</span>: <span class="number">15</span>,&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">listServices</span><span class="params">(self, services)</span>:</span></span><br><span class="line">		<span class="keyword">for</span> src <span class="keyword">in</span> services:</span><br><span class="line">			print(src, <span class="string">' '</span>)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">listPricing</span><span class="params">(self, services)</span>:</span></span><br><span class="line">		<span class="keyword">for</span> src <span class="keyword">in</span> services:</span><br><span class="line">			print(<span class="string">"For"</span>, Model.services[src][<span class="string">'number'</span>], src, <span class="string">"message you pay $"</span>, Model.services[src][<span class="string">'price'</span>])</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Controller</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.model = Model()</span><br><span class="line">		self.view = View()</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">getServices</span><span class="params">(self)</span>:</span></span><br><span class="line">		services = self.model.services.keys()</span><br><span class="line">		<span class="keyword">return</span> (self.view.listServices(services))</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">getPricing</span><span class="params">(self)</span>:</span></span><br><span class="line">		services = self.model.services.keys()</span><br><span class="line">		<span class="keyword">return</span> (self.view.listPricing(services))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.controller = Controller()</span><br><span class="line">		print(<span class="string">"Services Provided:"</span>)</span><br><span class="line">		self.controller.getServices()</span><br><span class="line">		print(<span class="string">"Pricing Provided:"</span>)</span><br><span class="line">		self.controller.getPricing()</span><br><span class="line"></span><br><span class="line">client = Client()</span><br></pre></td></tr></table></figure><p>这个只是展示数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(object)</span>:</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">logic</span><span class="params">(self)</span>:</span></span><br><span class="line">		data = <span class="string">"Got it!"</span></span><br><span class="line">		print(<span class="string">"Model: Crunching data as per business logic"</span>)</span><br><span class="line">		<span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, data)</span>:</span></span><br><span class="line">		print(<span class="string">"View: Updating the view with results: "</span>, data)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Controller</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.model = Model()</span><br><span class="line">		self.view = View()</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">interface</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"Controller: Relayed the Client asks"</span>)</span><br><span class="line">		data = self.model.logic()</span><br><span class="line">		self.view.update(data)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"Client: asks for certain information"</span>)</span><br><span class="line">		self.controller = Controller()</span><br><span class="line">		self.controller.interface()</span><br><span class="line">client = Client()</span><br></pre></td></tr></table></figure><p>Controller是沟通的桥梁</p><h2 id="实现："><a href="#实现：" class="headerlink" title="实现："></a>实现：</h2><p>所需模块：Torando 4.3, SQLite3 ：2.6.0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tornado</span><br><span class="line"><span class="keyword">import</span> tornado.web</span><br><span class="line"><span class="keyword">import</span> tornado.ioloop</span><br><span class="line"><span class="keyword">import</span> tornado.httpserver</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_execute</span><span class="params">(str)</span>:</span></span><br><span class="line">	<span class="keyword">with</span> sqlite3.connect(<span class="string">"huchi.db"</span>) <span class="keyword">as</span> conn:</span><br><span class="line">		cur = conn.cursor()</span><br><span class="line">		<span class="keyword">return</span> cur.execute(str)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">		query = <span class="string">"select * from task"</span></span><br><span class="line">		todos = _execute(query)</span><br><span class="line">		print(todos)</span><br><span class="line">		self.render(<span class="string">"index.html"</span>, todos = todos)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self)</span>:</span></span><br><span class="line">		name = self.get_argument(<span class="string">"name"</span>, <span class="keyword">None</span>)</span><br><span class="line">		query = <span class="string">"create table if not exists task (id INTEGER PRIMARY KEY, name TEXT, status NUMERIC) "</span></span><br><span class="line">		_execute(query)</span><br><span class="line">		query = <span class="string">"insert into task (name, status) values ('%s', %d) "</span> % (name, <span class="number">1</span>)</span><br><span class="line">		_execute(query)</span><br><span class="line">		self.redirect(<span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.render(<span class="string">'new.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpdateHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, id, status)</span>:</span></span><br><span class="line">		query = <span class="string">"update task set status=%d where id=%s"</span> % (int(status), id)</span><br><span class="line">		_execute(query)</span><br><span class="line">		self.redirect(<span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeleteHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, id)</span>:</span></span><br><span class="line">		query = <span class="string">"delete from task where id=%s"</span> % id</span><br><span class="line">		_execute(query)</span><br><span class="line">		self.redirect(<span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RunApp</span><span class="params">(tornado.web.Application)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		Handlers = [</span><br><span class="line">			(<span class="string">r'/'</span>, IndexHandler),</span><br><span class="line">			(<span class="string">r'/todo/new'</span>, NewHandler),</span><br><span class="line">			(<span class="string">r'/todo/update/(\w+)/(\d+)'</span>, UpdateHandler),</span><br><span class="line">			(<span class="string">r'/todo/delete/(\d+)'</span>, DeleteHandler),</span><br><span class="line">		]</span><br><span class="line">		settings = dict(</span><br><span class="line">			debug=<span class="keyword">True</span>,</span><br><span class="line">			template_path=<span class="string">'templates'</span>,</span><br><span class="line">			static_path=<span class="string">'static'</span></span><br><span class="line">		)</span><br><span class="line">		tornado.web.Application.__init__(self, Handlers, **settings)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	httpserver = tornado.httpserver.HTTPServer(RunApp())</span><br><span class="line">	httpserver.listen(<span class="number">5000</span>)</span><br><span class="line">	tornado.ioloop.IOLoop.instance().start()</span><br></pre></td></tr></table></figure><p>我们调用了tornado和sqlite3这两个库。</p><p>我们首先写了4个操作函数，增删查改四个类，每个类中都执行一两条语句。通过_execute()来执行里面的sql语句。最后用处理好的数据渲染我们的模板。有三个模板存放在templates文件夹中，这相当于是View</p><p>分别是：</p><p>base.html</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&#123;% block header %&#125;&#123;% end %&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&#123;%block body %&#125;&#123;% end %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;&gt;</span><br></pre></td></tr></table></figure><p>以及index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ToDo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>Your Tasks<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>Id<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>Status<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>Update<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		&#123;% for todo in todos %&#125;</span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">"cneter"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;todo[0]&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;todo[1]&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			&#123;% if todo[2] %&#125;</span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>Open<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			&#123;% else %&#125;</span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>Closed<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			&#123;% end %&#125;</span><br><span class="line">			&#123;% if todo[2] %&#125;</span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/todo/update/&#123;&#123;todo[0]&#125;&#125;/0"</span>&gt;</span>Close Task<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			&#123;% else %&#125;</span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/todo/update/&#123;&#123;todo[0]&#125;&#125;/1"</span>&gt;</span>Open Task<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			&#123;% end %&#125;</span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/todo/delete/&#123;&#123;todo[0]&#125;&#125;"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		&#123;% end %&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/todo/new"</span>&gt;</span>Add Task<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&gt;</span><br><span class="line">&#123;% end %&#125;</span><br></pre></td></tr></table></figure><p>以及new.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ToDo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>Add Task to your list<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/todo/new"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">id</span>=<span class="string">"new"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">placeholder</span>=<span class="string">"Enter task"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"add"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% end %&#125;</span><br></pre></td></tr></table></figure><p>对于增删两个类，我们的操作中最后是增加了重定向的。</p><p>可以看到我们还有一个runAPP的类，相当于控制器，存放着4个路由。</p><p>最后通过启动HTTPWeb服务器来运行。</p><p>修改一下界面就可以做一个简易的ToDo list的页面了。</p><h2 id="MVC的优点："><a href="#MVC的优点：" class="headerlink" title="MVC的优点："></a>MVC的优点：</h2><ul><li>使用MVC，开发人员可以将软件应用程序分为3个主要部分，可以提高维护性，强制松耦合，降低复杂度</li><li>MVC允许对前端进行独立更改，而对后端逻辑无需任何修改或只需很少的修改。相互独立</li></ul><h1 id="状态设计模式"><a href="#状态设计模式" class="headerlink" title="状态设计模式"></a>状态设计模式</h1><p>行为模式关注的是对象的响应性，通过对象之间的交互以实现更强大的功能。状态设计模式是一种行为设计模式。一个对象可以基于其内部状态封装多个行为。状态模式也可以看做是运行时改变对象行为的一种方式。</p><p>状态设计模式在3个主要参与者协助下工作：</p><ul><li>State: 封装对象行为的接口</li><li>ConcreteState: 实现State接口的子类，它的实现与对象的特定状态相关联。</li><li>Context: 定义了客户感兴趣的接口。还维护一个ConcreteState的子类的实例，该子类在内部定义了对象的特定状态的实现</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">State</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@abstractmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">Handle</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStateA</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">Handle</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"ConcreteStateA"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStateB</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">Handle</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"ConcreteStateB"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.state = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">getState</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> self.state</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">setState</span><span class="params">(self, state)</span>:</span></span><br><span class="line">		self.state = state</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">Handle</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.state.Handle()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	context = Context()</span><br><span class="line">	stateA = ConcreteStateA()</span><br><span class="line">	stateB = ConcreteStateB()</span><br><span class="line"></span><br><span class="line">	context.setState(stateA)</span><br><span class="line">	context.Handle()</span><br></pre></td></tr></table></figure><p>一个简单而不失美貌的例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">State</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@abstractmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doThis</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StartState</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doThis</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"TV switching ON.."</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StopState</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doThis</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"TV switching OFF.."</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TVContext</span><span class="params">(State)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.state = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">getState</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> self.state</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">setState</span><span class="params">(self, state)</span>:</span></span><br><span class="line">		self.state = state</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doThis</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.state.doThis()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	context = TVContext()</span><br><span class="line">	start = StartState()</span><br><span class="line">	stop = StopState()</span><br><span class="line"></span><br><span class="line">	context.setState(stop)</span><br><span class="line">	context.doThis()</span><br></pre></td></tr></table></figure><h2 id="实现：-1"><a href="#实现：-1" class="headerlink" title="实现："></a>实现：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComputerState</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	name = <span class="string">"state"</span></span><br><span class="line">	allowed = []</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">switch</span><span class="params">(self, state)</span>:</span></span><br><span class="line">		<span class="keyword">if</span> state.name <span class="keyword">in</span> self.allowed:</span><br><span class="line">			print(<span class="string">"Current:"</span>, self, <span class="string">" =&gt; switched to new state"</span>, state.name)</span><br><span class="line">			self.__class__ = state</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			print(<span class="string">"Current:"</span>, self, <span class="string">" =&gt; switching to"</span>, state.name, <span class="string">"not possible."</span>)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Off</span><span class="params">(ComputerState)</span>:</span></span><br><span class="line">	name = <span class="string">"off"</span></span><br><span class="line">	allowed = [<span class="string">"on"</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">On</span><span class="params">(ComputerState)</span>:</span></span><br><span class="line">	name = <span class="string">"on"</span></span><br><span class="line">	allowed = [<span class="string">"off"</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Suspend</span><span class="params">(ComputerState)</span>:</span></span><br><span class="line">	name = <span class="string">"suspend"</span></span><br><span class="line">	allowed = [<span class="string">"on"</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hibernate</span><span class="params">(ComputerState)</span>:</span></span><br><span class="line">	name = <span class="string">"hibernate"</span></span><br><span class="line">	allowed = [<span class="string">"on"</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model=<span class="string">"HP"</span>)</span>:</span></span><br><span class="line">		self.model = model</span><br><span class="line">		self.state = Off()</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(self, state)</span>:</span></span><br><span class="line">		self.state.switch(state)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	comp = Computer()</span><br><span class="line">	comp.change(On)</span><br><span class="line">	comp.change(On)</span><br><span class="line">	comp.change(Suspend)</span><br><span class="line">	comp.change(Hibernate)</span><br><span class="line">	comp.change(Off)</span><br></pre></td></tr></table></figure><h2 id="状态模式的优缺点"><a href="#状态模式的优缺点" class="headerlink" title="状态模式的优缺点"></a>状态模式的优缺点</h2><p>优点：</p><ul><li>状态模式中，对象的行为是其状态的函数结果，并且行为在运行时根据状态而改变，消除了以来if/else调教逻辑的依赖。</li><li>使用状态模式，适合实现多态行为，易于添加状态来支持额外的行为</li><li>提高了聚合性，特定于状态的行为被聚合到ConcreteState类中，并且放置在代码中的同一个地方。</li><li>通过只添加一个ConcreteState类来添加行为是非常容易的，改善了扩展应用程序行为时的灵活性，提高了代码的可维护性。</li></ul><p>缺点：</p><ul><li>类爆炸，每一个状态都需要在ConcreteState的帮助下定义，可能创建了太多的单一的类，状态机的结果难以审查</li><li>随着新行为的引入，Context类都需要进行相应的更新以处理每一个行为，使得上下文行为更容易受到每个新的行为的影响</li></ul><h1 id="反模式"><a href="#反模式" class="headerlink" title="反模式"></a>反模式</h1><p>软件设计不良设计的4个方面：</p><ul><li>不动性：以这种方式开发的应用程序难以重用</li><li>刚性：以这种方式开发的应用程序，任何小修改都会导致软件的太多部分必须进行相应的改动</li><li>脆弱性：当前应用程序的任何更改都会导致现有系统变得非常容易崩溃</li><li>粘滞性：由于架构层面的修改非常困难，修改必须有开发人员在代码或环境本身中进行</li></ul><p>反模式是处理重复出现问题的解决方案的后果，这些方案是无效。</p><p>原因：</p><ul><li>开发人员不了解软件开发实践</li><li>开发人员没有将设计模式应用到正确的上下文中</li></ul><p>反模式的好处：</p><ul><li>识别软件行业中出现的问题</li><li>开发响应的工具来识别这些问题，确定根本原因</li><li>描述可用于应用程序和架构层次上的改进措施</li></ul><p>反模式：</p><ul><li>软件开发反模式</li><li>软件架构反模式</li></ul><h2 id="软件开发反模式"><a href="#软件开发反模式" class="headerlink" title="软件开发反模式"></a>软件开发反模式</h2><p>普适原因:</p><ul><li>开发人员的想法会随着开发过程的推进而发生变化</li><li>用例通常会随着客户的反馈而进行更改</li><li>最初设计的数据结构会随着功能或可伸缩性等方面的考虑而发生变化</li></ul><p>常见的几种情况：</p><h3 id="意大利面条式代码"><a href="#意大利面条式代码" class="headerlink" title="意大利面条式代码"></a>意大利面条式代码</h3><p>典型成因：</p><ul><li>对面向对象编程和分析的无知</li><li>没有考虑产品的架构或设计</li><li>快餐式思维</li></ul><p>将面临的问题：</p><ul><li>结构的重用性降到了最低</li><li>维护工作量过高</li><li>进行修改时，扩展性和灵活性降低</li></ul><h3 id="金锤"><a href="#金锤" class="headerlink" title="金锤"></a>金锤</h3><p>由于某个解决方案在多个项目效果中不错，所以就瞎几把推广。一头扎进一个成熟的解决方案，不管其是否满足适用性。</p><p>原因：</p><ul><li>来自不了解具体问题的高层的建议</li><li>虽然某解决方案在过去多次验证有效，但当前项目却具有不同的背景和要求</li><li>被这种技术“绑架”了，即沉没成本</li></ul><p>影响：</p><ul><li>痴迷于一个解决方案</li><li>不是通过功能，而是通过开发中使用的技术来描述产品</li><li>没有满足需求，造成与用户的预期不符</li></ul><h3 id="熔岩流"><a href="#熔岩流" class="headerlink" title="熔岩流"></a>熔岩流</h3><p>与软件应用程序中一段用不到的代码有关，人们害怕对其进行修改，怕破坏其他东西，这段代码在软件中固化了其位置。</p><p>成因：</p><ul><li>在产品中有大量试错代码</li><li>由一个人单独编写的代码，未经审查，在没有任何培训的情况下移交给了其他开发团队</li><li>软件架构设计的初始思想是通过代码库，但没有人理解</li></ul><p>症状：</p><ul><li>开发的测试工作具有很低的代码覆盖率</li><li>代码中含有莫名其妙的注释</li><li>过时的接口，或开发人员需要围绕既有代码展开工作</li></ul><h3 id="复制粘贴剪切粘贴式编程"><a href="#复制粘贴剪切粘贴式编程" class="headerlink" title="复制粘贴剪切粘贴式编程"></a>复制粘贴剪切粘贴式编程</h3><p>原因：</p><ul><li>新手开发者不习惯编写代码或者不知道如何开发代码</li><li>快速修复bug或“急救章”式的开发</li><li>代码重复，无法满足跨模块标准化以及代码结构化的要求</li><li>缺乏长远打算</li></ul><p>后果：</p><ul><li>多个应用程序存在相同的问题</li><li>维护成本高，bug的生命周期变长</li><li>缺少模块化代码库，相同的代码回散落在多处</li><li>继承问题</li></ul><h2 id="软件架构饭模式"><a href="#软件架构饭模式" class="headerlink" title="软件架构饭模式"></a>软件架构饭模式</h2><h3 id="重复发明轮子"><a href="#重复发明轮子" class="headerlink" title="重复发明轮子"></a>重复发明轮子</h3><p>重新审视相同的问题并为他重新设计解决方案并没有意义，这基本就是重复发明轮子。</p><p>原因：</p><ul><li>缺乏中央文档或存储库来讲解架构级问题和村阿枫已实现的解决方案</li><li>社区或公司的技术领袖缺乏沟通</li><li>组织中遵循的流程是从头开始构建，不严谨，难以坚持</li></ul><p>后果：</p><ul><li>解决一个标准问题的解决方案太多，许多解决方案考虑不周全</li><li>耗费工程团队的时间资源</li><li>封闭的系统架构/重复劳动/糟糕的风险管理</li></ul><h3 id="供应商套牢"><a href="#供应商套牢" class="headerlink" title="供应商套牢"></a>供应商套牢</h3><p>产品公司依赖供应商提供的某些技术，以至于系统很难摆脱这些技术</p><p>原因：</p><ul><li>熟悉供应商公司的权威人士以及技术采购的可能折扣</li><li>基于营销和销售业务而不是技术评估选择的技术</li><li>在当前项目中使用经过验证的技术</li><li>技术人员/开发人员已经接受过相关技术的培训</li></ul><p>后果：</p><ul><li>公司产品的发布周期和维护周期取决于供应商的发布时间</li><li>产品围绕该技术而不是根据客户的要求开发</li><li>产品上市时间不可靠，不能满足客户需求</li></ul><h3 id="委员会设计"><a href="#委员会设计" class="headerlink" title="委员会设计"></a>委员会设计</h3><p>设计思想可能是由一些没有相应的节能或相应产品设计经验的技术专家提出的。</p><p>原因：</p><ul><li>根据组织的流程，产品的架构或设计是由众多的利益相关者批准的</li><li>没有指定单独的联系人或负责设计的架构师</li><li>由营销或技术专家确定设计优先级，而不是客户反馈来确定的</li></ul><p>症状：</p><ul><li>开发人员和架构师之间的观点冲突，即使在设计完成后依旧如此</li><li>过于复杂的设计，很难记录</li><li>规格或设计的任何改动都需要经过多次审查，导致实现延迟</li></ul><hr><p>(完)</p></div></div><div class="copyright"><p><span>本文标题:</span><a href="/2017/12/21/设计模式/python设计模式(4)/">python设计模式(四)</a></p><p><span>文章作者:</span><a href="/" title="回到主页">呼哧</a></p><p><span>发布时间:</span>2017-12-21, 18:40:42</p><p><span>最后更新:</span>2017-12-21, 15:13:53</p><p><span>原始链接:</span><a class="post-url" href="/2017/12/21/设计模式/python设计模式(4)/" title="python设计模式(四)">http://hu-chi.github.io/2017/12/21/设计模式/python设计模式(4)/</a> <span class="copy-path" data-clipboard-text="原文: http://hu-chi.github.io/2017/12/21/设计模式/python设计模式(4)/　　作者: 呼哧" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span><script>var clipboard=new Clipboard(".copy-path")</script></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。</p></div><nav id="article-nav"><div id="article-nav-newer" class="article-nav-title"><a href="/2017/12/29/随笔集/2017年末总结/">2017年末总结</a></div><div id="article-nav-older" class="article-nav-title"><a href="/2017/12/20/设计模式/python设计模式(3)/">python设计模式(三)</a></div></nav></article><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MVC-模式"><span class="toc-number">1.</span> <span class="toc-text">MVC 模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模型"><span class="toc-number">1.1.</span> <span class="toc-text">模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-number">1.2.</span> <span class="toc-text">视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制器"><span class="toc-number">1.3.</span> <span class="toc-text">控制器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现："><span class="toc-number">1.4.</span> <span class="toc-text">实现：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MVC的优点："><span class="toc-number">1.5.</span> <span class="toc-text">MVC的优点：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#状态设计模式"><span class="toc-number">2.</span> <span class="toc-text">状态设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#实现：-1"><span class="toc-number">2.1.</span> <span class="toc-text">实现：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#状态模式的优缺点"><span class="toc-number">2.2.</span> <span class="toc-text">状态模式的优缺点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#反模式"><span class="toc-number">3.</span> <span class="toc-text">反模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#软件开发反模式"><span class="toc-number">3.1.</span> <span class="toc-text">软件开发反模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#意大利面条式代码"><span class="toc-number">3.1.1.</span> <span class="toc-text">意大利面条式代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#金锤"><span class="toc-number">3.1.2.</span> <span class="toc-text">金锤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#熔岩流"><span class="toc-number">3.1.3.</span> <span class="toc-text">熔岩流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复制粘贴剪切粘贴式编程"><span class="toc-number">3.1.4.</span> <span class="toc-text">复制粘贴剪切粘贴式编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#软件架构饭模式"><span class="toc-number">3.2.</span> <span class="toc-text">软件架构饭模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#重复发明轮子"><span class="toc-number">3.2.1.</span> <span class="toc-text">重复发明轮子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#供应商套牢"><span class="toc-number">3.2.2.</span> <span class="toc-text">供应商套牢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#委员会设计"><span class="toc-number">3.2.3.</span> <span class="toc-text">委员会设计</span></a></li></ol></li></ol></li></ol></div><style>.left-col .switch-area,.left-col .switch-btn{display:none}.toc-level-3 i,.toc-level-3 ol{display:none!important}</style><input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录"><script>yiliaConfig.toc=["隐藏目录","显示目录",!0]</script><div class="share"><div class="bdsharebuttonbox"><a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a> <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a> <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a> <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a> <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a> <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a> <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a></div><script>with(window._bd_share_config={common:{bdSnsKey:{},bdText:"python设计模式(四)　| Play with huchi　",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:"24"},share:{}},document)(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)</script></div><div class="scroll" id="post-nav-button"><a href="/2017/12/29/随笔集/2017年末总结/" title="上一篇: 2017年末总结"><i class="fa fa-angle-left"></i> </a><a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a> <a href="/2017/12/20/设计模式/python设计模式(3)/" title="下一篇: python设计模式(三)"><i class="fa fa-angle-right"></i></a></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/20/acm/网络流/">网络流经典题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/20/acm/数论/">数论退役帖</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/04/acm/hash/">hash在ACM种的应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/03/hadoop/wordcount/">Hadoop的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/03/hadoop/Linux安装hadoop/">Hadoop的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/19/machineLearning/Lesson1/">机器学习初识</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/29/随笔集/2017年末总结/">2017年末总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/设计模式/python设计模式(4)/">python设计模式(四)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/设计模式/python设计模式(3)/">python设计模式(三)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/19/设计模式/python设计模式(2)/">python设计模式(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/24/设计模式/python设计模式(1)/">python设计模式(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/12/fluentPython/fluent_python5/">fluent python (五)一等函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/12/fluentPython/fluent_python2/">fluent python (二)python数据模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/fluentPython/fluent_python1/">fluent python (一)python数据模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/acm/01分数规划/">01分数规划</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/acm/循环节/">指数循环节</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/acm/大数模板/">大数模版</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/acm/堆排序/">堆排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/acm/容斥原理/">容斥原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/10/acm/三分与退火模拟/">三分与模拟退火</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/acm/Acdreamer博客数论学习(2)/">Acdreamer博客数论学习(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/04/acm/从dp的全世界路过(1)/">从dp的全世界路过(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/acm/低等数论1/">数论知识点摘要1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/acm/高斯消元/">高斯消元</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/acm/Acdreamer博客数论学习(1)/">Acdreamer博客数论学习(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/16/acm/数论基础专题整理(1)/">数论专题整理(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/12/acm/数位dp/">数位dp专题整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/09/读书笔记/拆掉思维里的墙(下)/">拆掉思维里的墙(下)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/07/acm/7-7acm整理笔记/">acm7-7总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/30/读书笔记/拆掉思维里的墙(上)/">拆掉思维里的墙(上)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/28/脚本/Script_ascii/">script： translate picture into ascii.text</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/读书笔记/哈佛的6堂独立思考课/">哈佛的6堂独立思考课</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/24/网页学习/djangoStart01/">Django_GO01</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/Linux-计算机基础认识/">Linux_计算机基础认识</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/10/python网络编程-init/">python网络编程.init()</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/07/随笔集/新的开始/">新的开始</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/07/网页学习/测试jsDOM笔记/">测试jsDOM入门笔记</a></li></ul><script></script></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"><i class="fa fa-copyright"></i> 2018 呼哧</div><div class="footer-right"><a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a> Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i></div></div><div class="visit"><span id="busuanzi_container_site_pv" style="display:none"><span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span> </span></span><span>| </span><span id="busuanzi_container_page_pv" style="display:none"><span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span></span></span></div></div></footer></div><script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script><script>$(document).ready(function(){if(-1<window.navigator.userAgent.indexOf("iPad")||"none"===$(".left-col").css("display")){var a=["#9db3f4","#414141","#e5a859","#f5dfc6","#c084a0","#847e72","#cd8390","#996731"],c=Math.ceil(Math.random()*(a.length-1));$("body").css({"background-color":a[c],"background-size":"cover"})}else{var e="url(/background/bg-x.jpg)".replace(/x/gi,Math.ceil(5*Math.random()));$("body").css({background:e,"background-attachment":"fixed","background-size":"cover"})}})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});</script><script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><div class="scroll" id="scroll"><a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a> <a href="#comments" onclick="load$hide()" title="查看评论"><i class="fa fa-comments-o"></i></a> <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a></div><script>var oOpenInNew={archives:".archive-article-title",miniArchives:"a.post-list-link",friends:"#js-friends a",socail:".social a"};for(var x in oOpenInNew)$(oOpenInNew[x]).attr("target","_blank")</script><script>var titleTime,originTitle=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="(つェ⊂) 我藏好了哦~ "+originTitle,clearTimeout(titleTime)):(document.title="(*´∇｀*) 被你发现啦~ "+originTitle,titleTime=setTimeout(function(){document.title=originTitle},2e3))})</script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body>